(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"09c1":function(e,t,s){},"3bfd":function(e,t,s){"use strict";s("09c1")},"46fe":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"q-gutter-y-md q-mx-auto",staticStyle:{"max-width":"600px"}},[s("div",{staticClass:"panel-wrap"},[s("q-card",{staticClass:"panel q-mb-lg"},[s("section",{staticClass:"q-pa-lg"},[s("div",{staticClass:"text-primary text-subtitle1 text-bold text-center q-pb-sm"},[e._v("Your current balances:")]),s("div",{staticClass:"balance-list"},[s("div",{staticClass:"q-mb-sm q-mr-xs q-ml-xs bg-info text-center"},[s("div",{staticClass:"text-bold text-subtitle1 font-bold",staticStyle:{"line-height":"1"}},[s("AbbreviateNumber",{attrs:{value:e.user.freeosBalance}})],1),s("div",{staticClass:"text-bold text-primary"},[e._v(e._s(e.currencies.freeos))])]),s("div",{staticClass:"q-mb-sm q-mr-xs q-ml-xs bg-info text-center"},[s("div",{staticClass:"text-bold text-subtitle1 font-bold",staticStyle:{"line-height":"1"}},[s("AbbreviateNumber",{attrs:{value:e.user.freebiBalance}})],1),s("div",{staticClass:"text-bold text-primary"},[e._v(e._s(e.currencies.freebi))])])])]),s("div",{staticClass:"flex justify-center",staticStyle:{"flex-direction":"row"}},[s("q-btn",{staticClass:"tab-btn",class:{"tab-btn--unselected":!e.isFreeosTabSelected},attrs:{outline:"",unelevated:"","no-caps":""},on:{click:function(t){e.isFreeosTabSelected=!e.isFreeosTabSelected}}},[e._v("Send "+e._s(e.currencies.freeos))]),s("q-btn",{staticClass:"tab-btn",class:{"tab-btn--unselected":e.isFreeosTabSelected},attrs:{outline:"",unelevated:"","no-caps":""},on:{click:function(t){e.isFreeosTabSelected=!e.isFreeosTabSelected}}},[e._v("Send "+e._s(e.currencies.freebi))])],1),e.isFreeosTabSelected?s("section",{staticClass:"q-pa-lg tabform"},[s("div",{staticClass:"text-center q-pb-lg q-px-lg"},[e._v("\n                        For more info on sending "+e._s(e.currencies.freeos)+" "),s("a",{attrs:{target:"_blank",title:"Info on transfers",href:"https://docs.freeos.io/d/h/6k0z3-408/43bbcca7c54387a/6k0z3-1402"}},[e._v("click here")]),e._v(".\n                    ")]),e.user.freeosBalance!=e.zeroBalance?s("div",[s("div",{staticClass:"row justify-center q-mb-md q-pl-md q-pr-md q-ml-md q-mr-md q-pb-xs"},[s("div",{staticClass:"col-xs-5 col-sm-4"},[s("p",{staticClass:"q-mt-sm q-mb-none"},[e._v("To account:")])]),s("div",{staticClass:"col-xs-6 col-sm-8"},[s("q-input",{attrs:{maxlength:"12",required:"",debounce:"500",rules:[e.validateUsername()],type:"text",outlined:"",dense:""},scopedSlots:e._u([{key:"hint",fn:function(){return[s("p",{staticClass:"q-mb-none",class:{"text-grey":e.toFreeosValidated||null==e.toFreeosValidated,"text-red":0==e.toFreeosValidated}},[e._v(e._s(e.toFreeosMessage))])]},proxy:!0}],null,!1,2170796729),model:{value:e.freeosData.to,callback:function(t){e.$set(e.freeosData,"to",t)},expression:"freeosData.to"}})],1)]),s("div",{staticClass:"row justify-center q-mb-md q-pl-md q-pr-md q-ml-md q-mr-md q-pb-xs"},[s("div",{staticClass:"col-xs-5 col-sm-4"},[s("p",{staticClass:"q-mt-sm q-mb-none"},[e._v("Amount:")])]),s("div",{staticClass:"col-xs-6 col-sm-8"},[s("q-input",{attrs:{type:"number",step:"0.0001",required:"",outlined:"",dense:"",novalidate:""},model:{value:e.freeosData.quantity,callback:function(t){e.$set(e.freeosData,"quantity",t)},expression:"freeosData.quantity"}},[s("q-btn",{staticClass:"max-btn",attrs:{size:"sm",unelevated:"","no-caps":"",outline:"",color:"secondary"},on:{click:function(t){return e.maxAmount(!1,t)}}},[e._v("Max")])],1),s("p",{staticClass:"q-mb-none text-grey"},[s("small",[e._v(e._s(e.currencyAvailable))])])],1)]),s("div",{staticClass:"row justify-center q-mb-md q-pl-md q-pr-md q-ml-md q-mr-md q-pb-xs"},[s("div",{staticClass:"col-xs-5 col-sm-4"},[s("p",{staticClass:"q-mt-sm q-mb-none"},[e._v("Memo:")])]),s("div",{staticClass:"col-xs-6 col-sm-8"},[s("q-input",{attrs:{maxlength:"256",type:"text",outlined:"",dense:""},model:{value:e.freeosData.memo,callback:function(t){e.$set(e.freeosData,"memo",t)},expression:"freeosData.memo"}})],1)]),s("div",{staticClass:"text-center q-mt-lg"},[s("q-btn",{staticClass:"full-width",attrs:{size:"lg",unelevated:"","no-caps":"",color:"primary",disable:!e.canSendFreeos},on:{click:function(t){return e.submit()}}},[e._v("Send")])],1)]):e._e(),e.user.freeosBalance==e.zeroBalance?s("div",[s("p",{staticClass:"text-center"},[e._v("You don't have any balance to transfer.")])]):e._e()]):e._e(),e.isFreeosTabSelected?e._e():s("section",{staticClass:"tabform"},[s("p",{staticClass:"bg-primary text-center text-white q-py-md"},[s("b",[e._v(e._s(e.currencies.freebi)+" transfer fee is currently "+e._s(e.freebixfee)+"%")])]),s("div",{staticClass:"text-center q-px-lg"},[e._v("\n                        For more info on sending "+e._s(e.currencies.freebi)+" "),s("a",{attrs:{target:"_blank",title:"Info on transfers",href:"https://docs.freeos.io/d/h/6k0z3-408/43bbcca7c54387a/6k0z3-1402"}},[e._v("click here")]),e._v(".\n                    ")]),e.user.freebiBalance!=e.zeroBalance?s("div",{staticClass:"q-pa-lg"},[s("div",{staticClass:"row justify-center q-mb-md q-pl-md q-pr-md q-ml-md q-mr-md q-pb-xs"},[s("div",{staticClass:"col-xs-5 col-sm-4"},[s("p",{staticClass:"q-mt-sm q-mb-none"},[e._v("To account:")])]),s("div",{staticClass:"col-xs-6 col-sm-8"},[s("q-input",{attrs:{maxlength:"12",required:"",debounce:"500",rules:[e.validateFreeosUsername()],type:"text",outlined:"",dense:""},scopedSlots:e._u([{key:"hint",fn:function(){return[s("p",{staticClass:"q-mb-none",class:{"text-grey":e.toFreebiValidated||null==e.toFreebiValidated,"text-red":0==e.toFreebiValidated}},[e._v(e._s(e.toFreebiMessage))])]},proxy:!0}],null,!1,2257592121),model:{value:e.freebiData.to,callback:function(t){e.$set(e.freebiData,"to",t)},expression:"freebiData.to"}})],1)]),s("div",{staticClass:"row justify-center q-mb-md q-pl-md q-pr-md q-ml-md q-mr-md q-pb-xs"},[s("div",{staticClass:"col-xs-5 col-sm-4"},[s("p",{staticClass:"q-mt-sm q-mb-none"},[e._v("Transfer Amount:")])]),s("div",{staticClass:"col-xs-6 col-sm-8"},[s("q-input",{attrs:{type:"number",step:"0.0001",required:"",outlined:"",dense:"",novalidate:""},on:{input:function(t){return e.updateFreebiAmount(!1)},change:function(t){return e.updateFreebiAmount(!1)}},model:{value:e.freebiData.quantity,callback:function(t){e.$set(e.freebiData,"quantity",t)},expression:"freebiData.quantity"}},[s("q-btn",{staticClass:"max-btn",attrs:{size:"sm",unelevated:"","no-caps":"",outline:"",color:"secondary"},on:{click:function(t){return e.maxAmount(!1,t)}}},[e._v("Max")])],1),s("p",{staticClass:"q-mb-none text-grey"},[s("small",[e._v(e._s(e.currencyAvailable))])])],1)]),s("div",{staticClass:"row justify-center q-mb-md q-pl-md q-pr-md q-ml-md q-mr-md q-pb-xs"},[s("div",{staticClass:"col-xs-5 col-sm-4"},[s("p",{staticClass:"q-mt-sm q-mb-none"},[e._v("Recipient will receive:")])]),s("div",{staticClass:"col-xs-6 col-sm-8"},[s("q-input",{attrs:{type:"number",step:"0.0001",required:"",outlined:"",dense:"",novalidate:"",disable:"",filled:""},model:{value:e.freebiRecipientAmount,callback:function(t){e.freebiRecipientAmount=t},expression:"freebiRecipientAmount"}}),s("p",{staticClass:"q-mb-none text-grey"},[s("small",[e._v("Transfer amount minus "+e._s(e.freebixfee)+"% transfer fee")])])],1)]),s("div",{staticClass:"row justify-center q-mb-md q-pl-md q-pr-md q-ml-md q-mr-md q-pb-xs"},[s("div",{staticClass:"col-xs-5 col-sm-4"},[s("p",{staticClass:"q-mt-sm q-mb-none"},[e._v("Memo:")])]),s("div",{staticClass:"col-xs-6 col-sm-8"},[s("q-input",{attrs:{maxlength:"256",type:"text",outlined:"",dense:""},model:{value:e.freebiData.memo,callback:function(t){e.$set(e.freebiData,"memo",t)},expression:"freebiData.memo"}})],1)]),e.canSendFreebi?s("div",{staticClass:"text-center q-mt-lg"},[s("p",{staticClass:"text-primary text-subtitle1 text-bold text-center q-mb-none"},[e._v("Summary:")]),s("p",[e._v("You will send "+e._s(e.freebiData.quantity)+" "+e._s(e.freebiData.token)+".\n                                "),s("br"),e._v(" @"+e._s(e.freebiData.to)+" will receive "+e._s(e.freebiRecipientAmount)+" "+e._s(e.freebiData.token)+" after "+e._s(e.freebixfee)+"% transfer fee.")])]):e._e(),s("div",{staticClass:"text-center q-mt-lg"},[s("q-btn",{staticClass:"full-width",attrs:{size:"lg",unelevated:"","no-caps":"",color:"primary",disable:!e.canSendFreebi},on:{click:function(t){return e.submit()}}},[e._v("Send")])],1)]):e._e(),e.user.freebiBalance==e.zeroBalance?s("div",{staticClass:"q-pa-lg"},[s("p",{staticClass:"text-center"},[e._v("You don't have any balance to transfer.")])]):e._e()])]),s("q-card",{staticClass:"panel q-mt-lg q-pa-lg text-center"},[s("div",{staticClass:"text-h4"},[e._v("Receive Tokens")]),s("div",{staticClass:"text-center q-pb-xs"},[s("small",[e._v("For more info "),s("a",{attrs:{target:"_blank",title:"Info on transfers",href:"https://docs.freeos.io/d/h/6k0z3-408/43bbcca7c54387a/6k0z3-1402"}},[e._v("click here")]),e._v(".")])]),s("div",{staticClass:"q-mt-md text-center text-h5"},[e._v("@"+e._s(e.accountName))]),e.isAuthenticated?s("q-btn",{staticClass:"q-mt-lg full-width",attrs:{href:"https://proton.alcor.exchange/",target:"_blank",unelevated:"","no-caps":"",outline:"",color:"primary"}},[e._v("Need Tokens? Try Alcor")]):e._e()],1)],1)]),s("CompleteDialog",{ref:"complete"})],1)},i=[],r=(s("5319"),s("2f62")),n=s("37ca"),o=s("1852"),l={name:"Transfer",components:{CompleteDialog:n["a"],AbbreviateNumber:o["a"]},data(){return{isFreeosTabSelected:!0,currencyName:"FREEOS",freeosData:{to:null,token:"FREEOS",quantity:null,memo:"",from:null},freebiData:{to:null,token:"FREEBI",quantity:null,memo:"",from:null},freebiRecipientAmount:null,isShowApprovedDialog:!1,isShowFailedDialog:!1,toFreebiValidated:null,toFreebiMessage:'Proton account without "@" symbol',toFreeosValidated:null,toFreeosMessage:'Proton account without "@" symbol'}},computed:{...Object(r["c"])("freeos",["accountName","user","isAuthenticated","dparametersTable","currencies"]),currencyAvailable(){return this.currentMax+" "+this.currentToken+" available to transfer"},currentMax(){return this.isFreeosTabSelected?this.isFreeosTabSelected?this.user.freeosBalance:void 0:this.user.freebiBalance},currentMaxTaxed(){return this.calcFreebiTaxed(this.user.freebiBalance)},zeroBalance(){let e=0;return e.toFixed("4")},currentToken(){return this.isFreeosTabSelected?this.isFreeosTabSelected?this.freeosData.token:void 0:this.freebiData.token},currentQuantity(){return this.isFreeosTabSelected?this.isFreeosTabSelected?this.freeosData.quantity:void 0:this.freebiData.quantity},freebixfee(){let e=this.dparametersTable.filter((function(e){return"freebixfee"==e.paramname}));return e=e.length?parseFloat(e[0].value).toFixed(2):"",e},canSendFreebi(){return!(!this.toFreebiValidated||!this.freebiData.quantity||!this.freebiData.to||parseFloat(this.freebiData.quantity)>this.currentMax||parseFloat(this.freebiData.quantity)<=0)},canSendFreeos(){return!(!this.toFreeosValidated||!this.freeosData.quantity||!this.freeosData.to||parseFloat(this.freeosData.quantity)>this.currentMax||parseFloat(this.freeosData.quantity)<=0)}},methods:{...Object(r["b"])("freeos",["fetch","transfer","isValidUsername","isValidFreeosUser"]),maxAmount(e=!1,t){!this.isFreeosTabSelected&!e?this.freebiData.quantity=this.currentMax:!this.isFreeosTabSelected&e?this.freebiRecipientAmount=this.currentMaxTaxed:this.isFreeosTabSelected&&(this.freeosData.quantity=this.currentMax);let s=t.target.closest(".col-xs-6").querySelector("input");s&&s.dispatchEvent(new Event("change",{bubbles:!0}))},async submit(){var e=this.isFreeosTabSelected?Object.assign({},this.freeosData):Object.assign({},this.freebiData);e.from=this.accountName,e.quantity=`${parseFloat(e.quantity).toFixed("4")} ${e.token}`,console.log("dataToSubmit",e);var t=e.token,s=t==this.currencies.freeos?e.quantity:this.freebiRecipientAmount,a=await this.transfer(e);a instanceof Error||this.$refs.complete.openDialog({title:"Woohoo",subtitle:"Your transfer to "+e.to+" was successful!",value:s,currency:t}),this.resetForm()},resetForm(){this.freeosData={to:null,token:this.currencies.freeos,quantity:null,memo:"",from:null},this.freebiData={to:null,token:this.currencies.freebi,quantity:null,memo:"",from:null},this.freebiRecipientAmount=null,this.toFreebiMessage=this.toFreeosMessage='Please use a valid Proton account without "@" symbol'},updateFreebiAmount(e=!1){e?this.freebiData.quantity=this.freebiRecipientAmount/(1-.01*this.freebixfee):this.freebiRecipientAmount=this.calcFreebiTaxed(this.freebiData.quantity)},calcFreebiTaxed(e){return e-this.roundDown(e*(.01*this.freebixfee),"4")},async validateUsername(){if(this.freeosData.to=this.cleanUsername(this.freeosData.to),this.freeosData.to&&this.freeosData.to==this.accountName)this.toFreeosValidated=!1,this.toFreeosMessage="Cannot transfer to self";else if(this.freeosData.to){let e=await this.isValidUsername(this.freeosData.to);e&&this.freeosData.to!=this.accountName?(this.toFreeosValidated=!0,this.toFreeosMessage="Proton Account is valid"):(this.toFreeosValidated=!1,this.toFreeosMessage='Please use a valid Proton account without "@" symbol')}else this.toFreeosValidated=null,this.toFreeosMessage='Proton account without "@" symbol'},async validateFreeosUsername(){if(this.freebiData.to=this.cleanUsername(this.freebiData.to),this.freebiData.to&&this.freebiData.to==this.accountName)this.toFreebiValidated=!1,this.toFreebiMessage="Cannot transfer to self";else if(this.freebiData.to){let e=await this.isValidFreeosUser(this.freebiData.to);e&&this.freebiData.to!=this.accountName?(this.toFreebiValidated=!0,this.toFreebiMessage="Proton Account is valid & registered with Freeos"):(this.toFreebiValidated=!1,this.toFreebiMessage="This user is not registered with Freeos")}else this.toFreebiValidated=null,this.toFreebiMessage='Proton account without "@" symbol'},cleanUsername(e){if(e){var t=/[\W67890]/g;return e.replace(t,"").toLowerCase()}return e},roundDown(e,t){return Number(Math.floor(e+"e"+t)+"e-"+t)},round(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}},watch:{currentQuantity(e,t){"number"==typeof e?e=this.roundDown(e,"4"):"string"==typeof e&&(e=this.roundDown(parseFloat(e),"4")),this.isFreeosTabSelected?this.freeosData.quantity=e:this.isFreeosTabSelected||(this.freebiData.quantity=e)},freebiRecipientAmount(e,t){"number"==typeof e?e=this.round(e,"4").toFixed("4"):"string"==typeof e&&(e=this.round(parseFloat(e),"4").toFixed("4")),this.freebiRecipientAmount=e}}},c=l,u=(s("3bfd"),s("c34d"),s("2877")),d=s("f09f"),m=s("9c40"),b=s("27f9"),f=s("8572"),h=s("eebe"),p=s.n(h),q=Object(u["a"])(c,a,i,!1,null,"78a2d8ea",null);t["default"]=q.exports;p()(q,"components",{QCard:d["a"],QBtn:m["a"],QInput:b["a"],QField:f["a"]})},"6f8e":function(e,t,s){},c34d:function(e,t,s){"use strict";s("6f8e")}}]);